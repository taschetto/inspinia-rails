<% content_for :title, "Editar Lançamento #{@time_entry.id}" %>
<% breadcrumb :edit_time_entry, @time_entry %>
<% content_for :actions do %>
<%= link_to "Atualizar Lançamento", "#", class: "btn btn-primary pull-right", onclick: '$(".edit_time_entry").submit()' %>
<% end %>

<%= form_for @time_entry do |f| %>
  <div class="row">
    <div class="col-lg-12">
      <div class="ibox float-e-margins">
        <div class="ibox-title">
          <h5>Dados do Lançamento</h5>
          <div class="ibox-tools">
            <a class="collapse-link">
              <i class="fa fa-chevron-up"></i>
            </a>
          </div>
        </div>
        <div class="ibox-content">
          <div class="form-horizontal m-t-md">
            <div class="form-group">
              <%= f.label :task, class: "col-sm-2 control-label" %>
              <div class="col-sm-10">
                <%= f.select :task_id, options_for_select(Task.all.map{|s|[s.name, s.id]}, @time_entry.task_id), {}, class: "form-control" %>
              </div>
            </div>
            <div class="form-group">
              <%= f.label :starts_at, class: "col-sm-2 control-label" %>
              <div class="col-sm-10">
                <div class='input-group date' id='starts_at_picker'>
                  <%= f.text_field :starts_at, value: @time_entry.starts_at.strftime("%d/%m/%Y %H:%M:%S"), class: "form-control" %>
                  <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                </div>
              </div>
            </div>
            <div class="form-group">
              <%= f.label :ends_at, class: "col-sm-2 control-label" %>
              <div class="col-sm-10">
                <div class='input-group date' id='ends_at_picker'>
                  <%= f.text_field :ends_at, value: @time_entry.ends_at.strftime("%d/%m/%Y %H:%M:%S"), class: "form-control" %>
                  <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                </div>
              </div>
            </div>
            <div class="form-group">
              <%= f.label :memo, class: "col-sm-2 control-label" %>
              <div class="col-sm-10">
                <%= f.text_field :memo, class: "form-control" %>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
<% end %>

<script type="text/javascript">
    $(function () {
        $('#starts_at_picker').datetimepicker({
          icons: {
            time: "fa fa-clock-o",
            date: "fa fa-calendar",
            up: "fa fa-arrow-up",
            down: "fa fa-arrow-down"
          }
        });
        $('#ends_at_picker').datetimepicker({
          icons: {
            time: "fa fa-clock-o",
            date: "fa fa-calendar",
            up: "fa fa-arrow-up",
            down: "fa fa-arrow-down"
          }
        });        
    });
</script>